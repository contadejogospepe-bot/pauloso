<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paulo Nova (PN) - Central Hub</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Babel para React -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Import Map para React + Lucide -->
  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@18.2.0",
      "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
      "lucide-react": "https://esm.sh/lucide-react@0.263.1",
      "html2canvas": "https://esm.sh/html2canvas@1.4.1"
    }
  }
  </script>

  <!-- Configura√ß√£o Tailwind -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            display: ['Orbitron', 'sans-serif'],
            body: ['Rajdhani', 'sans-serif'],
          },
          colors: {
            pn: {
              dark: '#0f172a',
              accent: '#6366f1',
              highlight: '#a855f7',
              glass: 'rgba(255, 255, 255, 0.05)',
            }
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-20px)' },
            }
          }
        },
      },
    }
  </script>
  
  <style>
    /* --- Configura√ß√µes Globais --- */
    body {
      background-color: #000000;
      color: #ffffff;
      margin: 0;
      overflow-x: hidden; /* Previne scroll lateral */
      cursor: default; 
    }

    /* Cursor Customizado (opcional, removemos o padr√£o para focar no trail) */
    /* body { cursor: none; } */ 

    /* --- ESTILOS DO HUB (PARALLAX & FX) --- */
    #view-hub .orb-wrapper {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
      background: radial-gradient(circle at center, #020617 0%, #000000 100%);
    }

    #view-hub .parallax-layer {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      will-change: transform;
    }

    #view-hub .orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(100px);
      opacity: 0.5;
      mix-blend-mode: screen; 
      will-change: transform;
    }

    /* Anima√ß√µes Org√¢nicas de Fundo */
    @keyframes organic-float-1 {
      0% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -50px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
      100% { transform: translate(0, 0) scale(1); }
    }
    @keyframes organic-float-2 {
      0% { transform: translate(0, 0) scale(1) rotate(0deg); }
      50% { transform: translate(-40px, 40px) scale(1.2) rotate(20deg); }
      100% { transform: translate(0, 0) scale(1) rotate(0deg); }
    }

    #view-hub .orb-1 { top: -10%; left: -10%; width: 60vw; height: 60vw; background: #4f46e5; animation: organic-float-1 20s ease-in-out infinite; }
    #view-hub .orb-2 { bottom: -10%; right: -10%; width: 70vw; height: 70vw; background: #7c3aed; animation: organic-float-2 25s ease-in-out infinite reverse; }
    #view-hub .orb-3 { top: 40%; left: 30%; width: 40vw; height: 40vw; background: #06b6d4; animation: organic-float-1 15s ease-in-out infinite alternate; opacity: 0.3; }

    /* Spotlight: A luz que segue o mouse */
    #spotlight {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1;
      background: radial-gradient(600px circle at var(--x) var(--y), rgba(99, 102, 241, 0.15), transparent 40%);
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    /* Paint Canvas: O rastro colorido */
    #view-hub #paint-canvas { 
      position: fixed; inset: 0; width: 100%; height: 100%; z-index: 2; 
      pointer-events: none; mix-blend-mode: screen; 
    }

    /* Particles */
    #view-hub .particles-container { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
    #view-hub .particle {
      position: absolute; background: white; border-radius: 50%; opacity: 0;
      animation: floatUp 10s linear infinite;
    }
    @keyframes floatUp {
      0% { transform: translateY(100vh) scale(0); opacity: 0; }
      10% { opacity: var(--opacity); }
      90% { opacity: var(--opacity); }
      100% { transform: translateY(-10vh) scale(1); opacity: 0; }
    }

    /* Noise Texture */
    #view-hub .noise-overlay {
      position: fixed; inset: 0; z-index: 3; opacity: 0.03; 
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      pointer-events: none;
    }

    /* --- EFEITOS DE TEXTO --- */
    .shimmer-text {
      background: linear-gradient(90deg, #ffffff 0%, #a5b4fc 20%, #ffffff 40%, #6366f1 60%, #ffffff 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shine 5s linear infinite;
    }
    @keyframes shine { to { background-position: 200% center; } }

    /* Glitch Effect no Hover do T√≠tulo */
    .glitch-wrapper:hover .glitch-text {
      animation: glitch-anim 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
      color: #818cf8;
    }
    @keyframes glitch-anim {
      0% { transform: translate(0) }
      20% { transform: translate(-2px, 2px) }
      40% { transform: translate(-2px, -2px) }
      60% { transform: translate(2px, 2px) }
      80% { transform: translate(2px, -2px) }
      100% { transform: translate(0) }
    }

    /* --- CART√ïES 3D (TILT) --- */
    .tilt-card-container {
      perspective: 1000px;
      transform-style: preserve-3d;
    }
    
    .glass-card {
      background: rgba(15, 23, 42, 0.4);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      transform-style: preserve-3d;
      transform: rotateX(0deg) rotateY(0deg);
      transition: transform 0.1s ease-out, border-color 0.3s ease, background 0.3s ease;
    }

    .glass-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(125deg, rgba(255,255,255,0.15) 0%, transparent 40%, transparent 60%, rgba(255,255,255,0.05) 100%);
      z-index: 2;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .glass-card:hover {
      background: rgba(30, 41, 59, 0.6);
      border-color: rgba(99, 102, 241, 0.4);
    }
    .glass-card:hover::before { opacity: 1; }

    /* Efeito de conte√∫do flutuando "fora" do cart√£o */
    .glass-card-content {
      transform: translateZ(40px); /* Empurra o texto para frente */
    }
    .glass-card-icon {
      transform: translateZ(60px); /* Empurra o √≠cone mais ainda */
    }

    /* --- ANIMA√á√ïES DE ENTRADA --- */
    @keyframes heroReveal {
      0% { opacity: 0; transform: scale(0.9) translateY(30px); filter: blur(10px); }
      100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
    }
    .animate-hero-reveal { animation: heroReveal 1.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
    
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-up { opacity: 0; animation: fadeUp 0.8s ease-out forwards; }

    /* --- APP STYLES --- */
    #view-app { display: none; background-color: #020617; min-height: 100vh; overflow-y: auto; }
    .view-active { display: block !important; }
    
    .custom-scrollbar::-webkit-scrollbar { width: 8px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #0f172a; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 4px; }
    
    /* Range Slider Custom */
    input[type=range] { -webkit-appearance: none; background: transparent; }
    input[type=range]::-webkit-slider-thumb {
        -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%;
        background: #ffffff; border: 2px solid #6366f1; cursor: pointer; margin-top: -6px;
        box-shadow: 0 0 10px rgba(99, 102, 241, 0.8);
    }
    input[type=range]::-webkit-slider-runnable-track {
        width: 100%; height: 4px; background: #1e293b; border-radius: 2px;
    }

    /* Modal */
    #modal-backdrop { transition: opacity 0.3s ease; opacity: 0; pointer-events: none; }
    #modal-backdrop.open { opacity: 1; pointer-events: auto; }
    #modal-content { transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    #modal-backdrop.open #modal-content { transform: scale(1); }
    .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
    @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } }
  </style>
</head>
<body class="antialiased selection:bg-indigo-500 selection:text-white font-sans">

  <!-- ========================= VIEW: HUB (LANDING PAGE) ========================= -->
  <div id="view-hub" class="view-active relative min-h-screen flex flex-col overflow-hidden">
      
      <!-- Layers & FX -->
      <div id="spotlight"></div>
      <div class="orb-wrapper">
        <div class="parallax-layer layer-back"><div class="orb orb-1"></div></div>
        <div class="parallax-layer layer-mid"><div class="orb orb-2"></div></div>
        <div class="parallax-layer layer-front"><div class="orb orb-3"></div></div>
      </div>
      <canvas id="paint-canvas"></canvas>
      <div id="particles-container" class="particles-container"></div>
      <div class="noise-overlay"></div>

      <!-- Navbar -->
      <nav class="fixed top-0 left-0 right-0 z-50 py-6 transition-all duration-500" id="navbar">
        <div class="container mx-auto px-6 flex items-center justify-between">
          <div class="flex items-center gap-3 cursor-pointer group" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <div class="relative w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800/80 border border-slate-700 shadow-lg overflow-hidden transition-transform duration-300 group-hover:rotate-12 group-hover:scale-110">
                <div class="absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600 opacity-75 group-hover:opacity-100 transition-opacity"></div>
                <span class="relative z-10 font-bold text-white text-sm font-display">PN</span>
            </div>
            <span class="font-semibold text-lg tracking-tight text-slate-200 group-hover:text-white transition-colors font-display">Paulo Nova</span>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="relative z-10 flex-grow flex flex-col items-center justify-center px-6 text-center pt-20 pb-10">
        
        <!-- Badge -->
        <div class="animate-fade-up delay-100 inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-indigo-500/30 bg-indigo-900/10 backdrop-blur-md mb-8 shadow-[0_0_20px_rgba(99,102,241,0.2)] cursor-default hover:bg-indigo-900/20 transition-colors">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-indigo-500"></span>
          </span>
          <span class="text-indigo-200 text-xs font-bold uppercase tracking-wider font-display">System Online</span>
        </div>

        <!-- Title -->
        <div class="glitch-wrapper mb-6 cursor-default">
            <h1 class="glitch-text animate-hero-reveal text-6xl md:text-9xl font-black tracking-tighter drop-shadow-2xl font-display">
            <span class="shimmer-text block">Paulo Nova</span>
            </h1>
        </div>
        
        <!-- Desc -->
        <div class="animate-fade-up delay-200 mb-20 px-4 perspective-1000">
          <div class="max-w-3xl mx-auto px-8 py-6 bg-slate-950/30 backdrop-blur-sm rounded-2xl border border-white/5 shadow-2xl transform hover:scale-105 transition-transform duration-500">
            <p class="text-lg md:text-2xl text-slate-200 font-medium leading-relaxed font-body">
              Arquitetando experi√™ncias digitais imersivas atrav√©s de 
              <span class="text-indigo-400 font-bold">Design</span>, 
              <span class="text-purple-400 font-bold">C√≥digo</span> e 
              <span class="text-cyan-400 font-bold">Magia</span>.
            </p>
          </div>
        </div>

        <!-- Cards Grid -->
        <div class="w-full max-w-5xl mx-auto">
          <div class="flex flex-col items-center mb-12 animate-fade-up delay-300">
            <div class="h-px w-full max-w-[200px] bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50"></div>
            <span class="text-indigo-200 text-xs font-mono mt-3 uppercase tracking-[0.3em] font-bold">Aplica√ß√µes</span>
          </div>

          <div class="grid gap-10 md:grid-cols-2 px-4 pb-12" id="cards-container">
            <!-- Injected JS -->
          </div>
        </div>

      </main>

      <footer class="relative z-10 py-6 border-t border-white/5 text-center bg-black/20 backdrop-blur-sm">
        <p class="text-slate-500 text-xs uppercase tracking-widest font-display animate-fade-up delay-500">&copy; 2025 Paulo Nova Hub.</p>
      </footer>

      <!-- Modal Senha -->
      <div id="modal-backdrop" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md hidden">
        <div id="modal-content" class="w-full max-w-md p-1 mx-4 bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl shadow-2xl">
            <div class="bg-slate-950 rounded-xl p-8 border border-slate-700 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent"></div>
                <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white transition-colors">‚úï</button>
                
                <div class="text-center mb-8">
                    <div class="w-16 h-16 rounded-full bg-indigo-500/10 flex items-center justify-center mx-auto mb-4 border border-indigo-500/30 shadow-[0_0_15px_rgba(99,102,241,0.3)]">
                        <span class="text-2xl">üîí</span>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-2 font-display">√Årea Restrita</h3>
                    <p class="text-slate-400 text-sm">Acesso permitido apenas para pessoal autorizado.</p>
                </div>
                
                <div class="space-y-4">
                    <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">C√≥digo de Acesso</label>
                    <input type="password" id="password-input" class="w-full bg-slate-900 border border-slate-800 rounded-lg px-4 py-3 text-white placeholder-slate-700 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-center text-lg tracking-[0.5em] transition-all" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button onclick="verifyPassword()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-indigo-500/25 active:scale-95 font-display uppercase tracking-wide">Desbloquear</button>
                    <p id="error-message" class="text-red-500 text-xs text-center hidden mt-2 font-bold uppercase">Acesso Negado</p>
                </div>
            </div>
        </div>
      </div>
  </div>

  <!-- ========================= VIEW: APP (CARD GAME - REACT) ========================= -->
  <div id="view-app" class="custom-scrollbar relative">
     <!-- Background Gradient for App -->
     <div class="absolute inset-0 pointer-events-none bg-gradient-to-b from-slate-950 via-[#050b14] to-black z-0"></div>
     <!-- Grid Overlay -->
     <div class="absolute inset-0 pointer-events-none z-0 opacity-10" style="background-image: linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px); background-size: 40px 40px;"></div>
    
    <div id="root" class="relative z-10"></div>
  </div>


  <!-- ========================= LOGICA DO HUB (Visual Effects) ========================= -->
  <script>
    // --- SETUP GERAL ---
    const hubView = document.getElementById('view-hub');
    const appView = document.getElementById('view-app');
    
    // --- NAVEGA√á√ÉO ---
    window.switchView = function(viewName) {
      if (viewName === 'app') {
        hubView.classList.remove('view-active');
        setTimeout(() => {
            hubView.style.display = 'none';
            appView.style.display = 'block';
            appView.classList.add('view-active');
        }, 100); // Pequeno delay para transi√ß√£o suave se adicionar CSS transition depois
        document.body.style.overflowY = 'auto';
      } else {
        appView.classList.remove('view-active');
        appView.style.display = 'none';
        hubView.style.display = 'flex'; // Retorna para flex
        hubView.classList.add('view-active');
        // FIX: Permitir scroll no hub, caso contr√°rio conte√∫do corta em telas menores
        document.body.style.overflowY = 'auto'; 
        window.scrollTo(0,0);
      }
    };

    // --- DADOS DOS CARDS ---
    const cardsData = [
      {
        title: "Card Forge",
        description: "Gerador de ativos RPG com engine futurista.",
        action: "window.switchView('app')",
        locked: false,
        color: "from-indigo-500 to-blue-600",
        icon: `<svg class="w-10 h-10 text-white drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>`
      },
      {
        title: "Project: Eval",
        description: "Ferramenta de an√°lise sist√™mica (Classified).",
        targetUrl: "https://ai.studio/apps/drive/1FLQUCj4zuJZ2cYWZBimH8LDhISe6O-tr",
        locked: true,
        color: "from-purple-600 to-fuchsia-600",
        icon: `<svg class="w-10 h-10 text-white drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>`
      }
    ];

    // --- RENDERIZA√á√ÉO DOS CARDS & LOGICA DE TILT 3D ---
    const container = document.getElementById('cards-container');
    
    cardsData.forEach((card, index) => {
      const wrapper = document.createElement('div');
      wrapper.className = `tilt-card-container animate-fade-up w-full h-full`;
      wrapper.style.animationDelay = `${0.3 + (index * 0.2)}s`;
      
      const clickAttr = card.locked ? `onclick="openModal('${card.targetUrl}')"` : `onclick="${card.action}"`;
      const btnClass = card.locked 
        ? "border border-slate-600 text-slate-400 cursor-not-allowed" 
        : "bg-white text-black hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.4)] border-transparent";
      
      wrapper.innerHTML = `
        <div ${clickAttr} class="glass-card relative rounded-2xl overflow-hidden cursor-pointer h-full min-h-[280px] group select-none">
          <div class="relative p-8 h-full flex flex-col z-10 glass-card-content">
            
            <!-- Icon Box -->
            <div class="glass-card-icon w-16 h-16 rounded-2xl bg-gradient-to-br ${card.color} flex items-center justify-center shadow-lg mb-6 group-hover:scale-110 group-hover:rotate-6 transition-transform duration-500 border border-white/20">
              ${card.icon}
            </div>
            
            <!-- Text -->
            <h3 class="text-3xl font-bold text-white mb-2 font-display tracking-tight group-hover:text-indigo-300 transition-colors">${card.title}</h3>
            <p class="text-slate-300 text-sm leading-relaxed mb-8 font-medium">${card.description}</p>
            
            <!-- Button -->
            <div class="mt-auto flex items-center justify-between">
               <div class="px-4 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300 ${btnClass}">
                  ${card.locked ? 'Bloqueado' : 'Iniciar'}
               </div>
               <span class="text-2xl text-white/50 group-hover:translate-x-2 transition-transform duration-300">${card.locked ? 'üîí' : '‚Üí'}</span>
            </div>
          </div>
        </div>
      `;
      
      container.appendChild(wrapper);

      // --- L√≥gica de Tilt 3D (Vanilla JS) ---
      const cardEl = wrapper.querySelector('.glass-card');
      
      wrapper.addEventListener('mousemove', (e) => {
        const rect = wrapper.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        // Calcula o centro
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        
        // Intensidade da rota√ß√£o (max 15 graus)
        const rotateX = ((y - centerY) / centerY) * -15;
        const rotateY = ((x - centerX) / centerX) * 15;

        cardEl.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
      });

      wrapper.addEventListener('mouseleave', () => {
        cardEl.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
      });
    });

    // --- SPOTLIGHT EFFECT ---
    const spotlight = document.getElementById('spotlight');
    document.addEventListener('mousemove', (e) => {
        if(!hubView.classList.contains('view-active')) {
             spotlight.style.opacity = 0;
             return;
        }
        spotlight.style.opacity = 1;
        spotlight.style.setProperty('--x', `${e.clientX}px`);
        spotlight.style.setProperty('--y', `${e.clientY}px`);
    });

    // --- PAINT CANVAS TRAIL (Neon) ---
    const canvas = document.getElementById('paint-canvas');
    const ctx = canvas.getContext('2d');
    let hue = 0;
    
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const mouse = { x: undefined, y: undefined };
    const trail = [];

    window.addEventListener('mousemove', (e) => {
        if(!hubView.classList.contains('view-active')) return;
        mouse.x = e.x;
        mouse.y = e.y;
        // Adiciona particulas ao rastro
        for(let i=0; i<2; i++){
            trail.push({
                x: mouse.x,
                y: mouse.y,
                size: Math.random() * 5 + 2,
                color: `hsl(${hue}, 100%, 50%)`,
                speedX: Math.random() * 2 - 1,
                speedY: Math.random() * 2 - 1,
                life: 1
            });
        }
    });

    function animateTrail() {
        // Efeito de rastro: limpar com opacidade cria o fade
        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        hue += 2; // Ciclar cores

        for (let i = 0; i < trail.length; i++) {
            const p = trail[i];
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fill();
            
            p.x += p.speedX;
            p.y += p.speedY;
            p.life -= 0.02;
            p.size *= 0.95; // Encolher

            if (p.life <= 0) {
                trail.splice(i, 1);
                i--;
            }
        }
        requestAnimationFrame(animateTrail);
    }
    animateTrail();

    // --- PARTICLES BACKGROUND ---
    const particlesContainer = document.getElementById('particles-container');
    const particleCount = 30;
    for(let i=0; i<particleCount; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random() * 100 + '%';
        p.style.setProperty('--opacity', Math.random() * 0.5 + 0.1);
        // Tamanhos variados
        const size = Math.random() * 3 + 1;
        p.style.width = size + 'px';
        p.style.height = size + 'px';
        p.style.animationDuration = (Math.random() * 10 + 10) + 's';
        p.style.animationDelay = (Math.random() * 10) + 's';
        particlesContainer.appendChild(p);
    }

    // --- PARALLAX ORBS ---
    const layerBack = document.querySelector('.layer-back');
    const layerMid = document.querySelector('.layer-mid');
    const layerFront = document.querySelector('.layer-front');
    
    let mouseX = 0, mouseY = 0, smoothX = 0, smoothY = 0;
    document.addEventListener('mousemove', (e) => {
        if(hubView.classList.contains('view-active')){
            mouseX = (e.clientX / window.innerWidth - 0.5) * 100; 
            mouseY = (e.clientY / window.innerHeight - 0.5) * 100;
        }
    });

    function animateParallax() {
        smoothX += (mouseX - smoothX) * 0.05;
        smoothY += (mouseY - smoothY) * 0.05;
        if(layerBack) layerBack.style.transform = `translate3d(${smoothX * 0.1}px, ${smoothY * 0.1}px, 0)`;
        if(layerMid) layerMid.style.transform = `translate3d(${smoothX * -0.2}px, ${smoothY * -0.2}px, 0)`;
        if(layerFront) layerFront.style.transform = `translate3d(${smoothX * 0.3}px, ${smoothY * 0.3}px, 0)`;
        requestAnimationFrame(animateParallax);
    }
    animateParallax();

    // --- MODAL LOGIC ---
    let currentTargetUrl = "";
    const modalBackdrop = document.getElementById('modal-backdrop');
    const passInput = document.getElementById('password-input');
    const errorMsg = document.getElementById('error-message');

    function openModal(url) {
      currentTargetUrl = url;
      modalBackdrop.classList.remove('hidden');
      setTimeout(() => modalBackdrop.classList.add('open'), 10);
      passInput.value = ""; passInput.focus(); errorMsg.classList.add('hidden');
    }
    function closeModal() {
      modalBackdrop.classList.remove('open');
      setTimeout(() => modalBackdrop.classList.add('hidden'), 300);
    }
    function verifyPassword() {
      if (passInput.value.trim() === "772010") {
        window.location.href = currentTargetUrl;
      } else {
        errorMsg.classList.remove('hidden');
        const content = document.getElementById('modal-content');
        content.classList.remove('shake');
        void content.offsetWidth; // Trigger reflow
        content.classList.add('shake');
      }
    }
    passInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') verifyPassword(); });

  </script>

  <!-- ========================= LOGICA DO REACT (Card Forge - UPDATED DESIGN) ========================= -->
  <script type="text/babel" data-type="module">
      import React, { useState, useRef, forwardRef } from 'react';
      import ReactDOM from 'react-dom/client';
      import html2canvas from 'html2canvas';
      import { 
        Zap, Shield, Activity, Wind, Brain, User,
        Hammer, Crosshair, Sun, Skull, Wand2, Axe, Flame, ShieldCheck, 
        Heart, Moon, Ghost, Sparkles, Target, Compass, Swords, Crown,
        Upload, RefreshCw, Download, ImageIcon, ArrowLeft, Cpu, Code2, Layers
      } from 'lucide-react';

      const ElementType = { FIRE: 'Fire', WATER: 'Water', EARTH: 'Earth', AIR: 'Air', VOID: 'Void', CYBER: 'Cyber' };
      const ClassType = {
        FERREIRO: 'Ferreiro', PISTOLEIRO: 'Pistoleiro', MONGE: 'Monge', NECROMANTE: 'Necromante',
        FEITICEIRO: 'Feiticeiro', BARBARO: 'B√°rbaro', BERSERKER: 'Berserker', PALADINO: 'Paladino',
        CURANDEIRO: 'Curandeiro', NINJA: 'Ninja', ASSASSINO: 'Assassino', MAGO: 'Mago',
        ARQUEIRO: 'Arqueiro', CACADOR: 'Ca√ßador', GUERREIRO: 'Guerreiro', CAVALEIRO: 'Cavaleiro'
      };

      const DEFAULT_CARD = {
        name: "Nova Warrior", description: "A legendary warrior from the PauloNova dimension.",
        image: null, stats: { power: 5, defense: 5, stamina: 5, agility: 5, intelligence: 5 },
        element: ElementType.CYBER, classType: ClassType.GUERREIRO
      };

      const StatSlider = ({ label, value, onChange, icon: Icon, color }) => (
          <div className="mb-4">
            <div className="flex justify-between items-center mb-2 text-xs font-display tracking-widest uppercase text-slate-400">
              <div className="flex items-center gap-2"><Icon size={14} className={color} /><span>{label}</span></div>
              <span className="text-white font-mono bg-white/5 px-2 rounded">{value}</span>
            </div>
            <div className="relative h-3 bg-slate-900/80 rounded-full overflow-hidden border border-slate-700">
               <input type="range" min="0" max="100" value={value} onChange={(e) => onChange(parseInt(e.target.value))} 
                      className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20" />
               <div className="absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-600 to-purple-500 transition-all duration-200 z-10" style={{ width: `${value}%` }}></div>
               {/* Grid lines inside slider for tech feel */}
               <div className="absolute inset-0 w-full h-full z-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQIW2NkQAKrVq36zwjjgzhhYWGMYAEYB8RmROaABADeOQ8CXl/xfgAAAABJRU5ErkJggg==')] opacity-20"></div>
            </div>
          </div>
      );

      const StatRow = ({ icon: Icon, label, value, color, barColor }) => (
        <div className="flex items-center w-full mb-1.5">
            <div className="flex items-center w-14 shrink-0">
                <Icon size={12} className={`${color} mr-1.5`} />
                <span className="text-[10px] font-bold text-gray-400 font-display uppercase tracking-wider mt-[1px]">{label}</span>
            </div>
            <div className="flex-1 h-1.5 bg-gray-900/80 rounded-sm overflow-hidden relative border border-white/5">
              <div className={`absolute top-0 left-0 h-full ${barColor}`} style={{ width: `${Math.min(value, 100)}%` }}></div>
            </div>
            <div className="w-8 text-right shrink-0"><span className={`text-[11px] font-bold font-mono ${color}`}>{value}</span></div>
        </div>
      );

      const CardPreview = forwardRef(({ data }, ref) => {
        const totalStats = Object.values(data.stats).reduce((a, b) => a + b, 0);
        const dynamicLevel = Math.max(1, Math.floor(totalStats / 5));

        // --- SYNERGY & THEME MECHANIC ---
        const getTheme = (cls, el) => {
            // 1. Special Combinations (Legendary Synergies)
            if (['Guerreiro', 'B√°rbaro', 'Berserker'].includes(cls) && el === 'Fire') {
                return { border: 'border-red-600', shadow: 'shadow-[0_0_50px_rgba(220,38,38,0.6)]', badge: 'bg-red-900 text-red-200 border-red-500', iconColor: 'text-red-400', glow: 'shadow-red-500/50' };
            }
            if (['Ninja', 'Assassino', 'Pistoleiro'].includes(cls) && el === 'Cyber') {
                return { border: 'border-fuchsia-500', shadow: 'shadow-[0_0_50px_rgba(217,70,239,0.6)]', badge: 'bg-fuchsia-900 text-fuchsia-200 border-fuchsia-500', iconColor: 'text-fuchsia-400', glow: 'shadow-fuchsia-500/50' };
            }
            if (['Necromante', 'Feiticeiro'].includes(cls) && (el === 'Void' || el === 'Earth')) {
                return { border: 'border-lime-500', shadow: 'shadow-[0_0_50px_rgba(132,204,22,0.6)]', badge: 'bg-lime-900 text-lime-200 border-lime-500', iconColor: 'text-lime-400', glow: 'shadow-lime-500/50' };
            }
             if (['Paladino', 'Cl√©rigo', 'Curandeiro'].includes(cls) && (el === 'Air' || el === 'Water')) {
                return { border: 'border-amber-300', shadow: 'shadow-[0_0_50px_rgba(252,211,77,0.6)]', badge: 'bg-amber-900 text-amber-200 border-amber-300', iconColor: 'text-amber-300', glow: 'shadow-amber-400/50' };
            }
             if (['Mago'].includes(cls) && (el === 'Water')) {
                return { border: 'border-cyan-400', shadow: 'shadow-[0_0_50px_rgba(34,211,238,0.6)]', badge: 'bg-cyan-900 text-cyan-200 border-cyan-400', iconColor: 'text-cyan-300', glow: 'shadow-cyan-400/50' };
            }

            // 2. Default Element Themes
            switch(el) {
                case 'Fire': return { border: 'border-orange-500', shadow: 'shadow-[0_0_30px_rgba(249,115,22,0.4)]', badge: 'bg-orange-900/50 text-orange-200 border-orange-500/50', iconColor: 'text-orange-400', glow: 'shadow-orange-500/30' };
                case 'Water': return { border: 'border-blue-500', shadow: 'shadow-[0_0_30px_rgba(59,130,246,0.4)]', badge: 'bg-blue-900/50 text-blue-200 border-blue-500/50', iconColor: 'text-blue-400', glow: 'shadow-blue-500/30' };
                case 'Earth': return { border: 'border-emerald-500', shadow: 'shadow-[0_0_30px_rgba(16,185,129,0.4)]', badge: 'bg-emerald-900/50 text-emerald-200 border-emerald-500/50', iconColor: 'text-emerald-400', glow: 'shadow-emerald-500/30' };
                case 'Air': return { border: 'border-sky-300', shadow: 'shadow-[0_0_30px_rgba(125,211,252,0.4)]', badge: 'bg-sky-900/50 text-sky-200 border-sky-500/50', iconColor: 'text-sky-400', glow: 'shadow-sky-500/30' };
                case 'Void': return { border: 'border-purple-600', shadow: 'shadow-[0_0_30px_rgba(147,51,234,0.4)]', badge: 'bg-purple-900/50 text-purple-200 border-purple-500/50', iconColor: 'text-purple-400', glow: 'shadow-purple-500/30' };
                case 'Cyber': return { border: 'border-pink-500', shadow: 'shadow-[0_0_30px_rgba(236,72,153,0.4)]', badge: 'bg-pink-900/50 text-pink-200 border-pink-500/50', iconColor: 'text-pink-400', glow: 'shadow-pink-500/30' };
                default: return { border: 'border-slate-500', shadow: 'shadow-none', badge: 'bg-slate-800 text-slate-300 border-slate-600', iconColor: 'text-slate-400', glow: 'shadow-none' };
            }
        };

        const theme = getTheme(data.classType, data.element);
        
        const getIcon = (cls) => {
            if(cls === 'Ferreiro') return Hammer; if(cls === 'Mago') return Sparkles;
            return Swords; 
        };
        const ClassIcon = getIcon(data.classType);

        return (
          <div className="flex items-center justify-center p-10 bg-slate-900/30 backdrop-blur-sm rounded-3xl border border-white/5 min-h-[700px] relative overflow-hidden">
            {/* Decorative UI lines around preview */}
            <div className="absolute top-4 left-4 w-4 h-4 border-t-2 border-l-2 border-indigo-500/50"></div>
            <div className="absolute top-4 right-4 w-4 h-4 border-t-2 border-r-2 border-indigo-500/50"></div>
            <div className="absolute bottom-4 left-4 w-4 h-4 border-b-2 border-l-2 border-indigo-500/50"></div>
            <div className="absolute bottom-4 right-4 w-4 h-4 border-b-2 border-r-2 border-indigo-500/50"></div>

            <div ref={ref} className="p-6 bg-transparent"> 
              <div className={`relative w-[360px] h-[560px] bg-[#0a0a0a] rounded-2xl border-[4px] ${theme.border} ${theme.shadow} overflow-hidden flex flex-col transition-all duration-500`}>
                {/* Header */}
                <div className="h-[70px] bg-gradient-to-r from-[#111] to-[#1a1a1a] flex items-center px-5 relative z-10 border-b border-white/10">
                    <div className="flex-1">
                        <span className="font-display font-bold text-white text-xl uppercase tracking-tight block drop-shadow-md">{data.name}</span>
                        <span className="text-[9px] text-gray-500 font-mono tracking-widest uppercase">Entity ID: {Math.floor(Math.random()*9000)+1000}</span>
                    </div>
                    <div className={`flex items-center justify-center h-[32px] px-3 rounded border ${theme.badge} backdrop-blur-md transition-colors duration-300`}>
                        <ClassIcon size={14} className={`${theme.iconColor} mr-2`} />
                        <span className="text-[10px] font-bold uppercase font-display tracking-wider">{data.classType}</span>
                    </div>
                </div>
                
                {/* Image Area */}
                <div className="h-[260px] w-full bg-[#050505] relative overflow-hidden z-0 group">
                    {data.image ? 
                        <img src={data.image} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" crossOrigin="anonymous" /> 
                        : <div className="w-full h-full flex items-center justify-center text-gray-800 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-900 to-black"><User size={64} opacity={0.2} /></div>
                    }
                    {/* Level Badge - Dynamic */}
                    <div className="absolute top-2 left-2 w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-600 rounded-lg flex items-center justify-center border border-white/20 shadow-lg z-20">
                        <span className="font-display font-black text-white text-lg drop-shadow-md">{dynamicLevel}</span>
                    </div>
                    <div className="absolute bottom-0 left-0 w-full h-10 bg-gradient-to-t from-black to-transparent opacity-80"></div>
                </div>

                {/* Body */}
                <div className="flex-1 bg-[#0e0e0e] px-5 py-4 relative z-10 flex flex-col border-t border-white/5">
                    {/* Desc */}
                    <div className="mb-5 relative">
                        <div className={`absolute left-0 top-0 bottom-0 w-0.5 ${theme.border.replace('border', 'bg')}`}></div>
                        <p className="text-[12px] text-gray-400 pl-3 font-body leading-tight">{data.description}</p>
                    </div>
                    
                    {/* Stats Grid */}
                    <div className="grid grid-cols-2 gap-x-8 gap-y-2 mb-3">
                        <StatRow icon={Zap} label="PWR" value={data.stats.power} color="text-red-400" barColor="bg-gradient-to-r from-red-500 to-red-400" />
                        <StatRow icon={Shield} label="DEF" value={data.stats.defense} color="text-blue-400" barColor="bg-gradient-to-r from-blue-500 to-blue-400" />
                        <StatRow icon={Activity} label="STA" value={data.stats.stamina} color="text-emerald-400" barColor="bg-gradient-to-r from-emerald-500 to-emerald-400" />
                        <StatRow icon={Wind} label="AGI" value={data.stats.agility} color="text-yellow-400" barColor="bg-gradient-to-r from-yellow-500 to-yellow-400" />
                        <StatRow icon={Brain} label="INT" value={data.stats.intelligence} color="text-purple-400" barColor="bg-gradient-to-r from-purple-500 to-purple-400" />
                    </div>

                    {/* Footer */}
                    <div className="mt-auto pt-3 border-t border-white/5 flex justify-between items-end">
                        <div>
                            <span className="text-[9px] text-gray-600 font-mono uppercase tracking-widest block mb-0.5">Combat Rating</span>
                            <div className="flex gap-1 h-1 w-16">
                                <div className="flex-1 bg-slate-800 rounded-sm"></div>
                                <div className="flex-1 bg-slate-700 rounded-sm"></div>
                                <div className={`flex-1 rounded-sm ${theme.border.replace('border', 'bg')}`}></div>
                            </div>
                        </div>
                        <span className="text-2xl font-display font-black text-white tracking-tight drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]">{totalStats}</span>
                    </div>
                </div>
              </div>
            </div>
          </div>
        );
      });

      const App = () => {
        const [card, setCard] = useState(DEFAULT_CARD);
        const [isDownloading, setIsDownloading] = useState(false);
        const fileInputRef = useRef(null);
        const cardRef = useRef(null);

        const handleStatChange = (key, value) => setCard(prev => ({...prev, stats: { ...prev.stats, [key]: value }}));
        const handleImageUpload = (e) => {
          const file = e.target.files?.[0];
          if (file) {
            const reader = new FileReader();
            reader.onloadend = () => setCard(prev => ({ ...prev, image: reader.result }));
            reader.readAsDataURL(file);
          }
        };
        const handleDownload = async () => {
          if (!cardRef.current) return;
          setIsDownloading(true);
          try {
            await new Promise(resolve => setTimeout(resolve, 500));
            const canvas = await html2canvas(cardRef.current, { backgroundColor: null, scale: 2, useCORS: true, logging: false });
            const link = document.createElement('a');
            link.download = `${card.name.replace(/\s+/g, '_')}_Card.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
          } catch (err) { console.error(err); } finally { setIsDownloading(false); }
        };

        return (
          <div className="min-h-screen font-body text-slate-200">
            
            {/* App Navbar */}
            <nav className="border-b border-white/10 bg-slate-950/80 backdrop-blur-md sticky top-0 z-50">
              <div className="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
                <div className="flex items-center gap-6">
                   <button onClick={() => window.switchView('hub')} className="group flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 transition-all border border-white/5 hover:border-white/20" title="Voltar ao Hub">
                      <ArrowLeft size={18} className="text-indigo-400 group-hover:-translate-x-1 transition-transform" />
                      <span className="text-sm font-display uppercase tracking-widest font-bold text-slate-300 group-hover:text-white">Voltar</span>
                   </button>
                   <div className="h-8 w-px bg-white/10"></div>
                   <div className="flex items-center gap-3">
                      <div className="w-10 h-10 bg-gradient-to-br from-indigo-600 to-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 border border-white/10">
                        <Cpu size={20} className="text-white" />
                      </div>
                      <div>
                        <h1 className="font-display font-bold text-xl tracking-wider text-white leading-none">CARD FORGE</h1>
                        <span className="text-[10px] text-indigo-400 font-mono uppercase tracking-[0.2em]">System v2.0</span>
                      </div>
                   </div>
                </div>
              </div>
            </nav>

            <main className="max-w-7xl mx-auto px-6 py-10">
              <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
                
                {/* CONTROL PANEL (LEFT) */}
                <div className="lg:col-span-5 space-y-8 animate-fade-up">
                  
                  {/* Entity Data Section */}
                  <div className="bg-slate-900/50 backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-xl relative overflow-hidden group">
                    <div className="absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-purple-500/5 pointer-events-none"></div>
                    <div className="relative z-10">
                        <h2 className="text-sm font-display font-bold text-white mb-6 flex items-center gap-2 uppercase tracking-widest">
                            <Layers size={16} className="text-indigo-500" />
                            Core Data
                        </h2>
                        
                        <div className="space-y-5">
                        <div>
                            <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 font-display">Entity Name</label>
                            <input type="text" value={card.name} onChange={(e) => setCard(prev => ({ ...prev, name: e.target.value }))} 
                                   className="w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-white font-display tracking-wide focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all outline-none placeholder-slate-700" placeholder="Enter name..." />
                        </div>
                        
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 font-display">Class</label>
                                <div className="relative">
                                    <select value={card.classType} onChange={(e) => setCard(prev => ({ ...prev, classType: e.target.value }))} 
                                            className="w-full bg-black/40 border border-white/10 rounded-lg px-3 py-3 text-white text-sm appearance-none focus:border-indigo-500 outline-none transition-all">
                                        {Object.values(ClassType).map(c => <option key={c} value={c}>{c}</option>)}
                                    </select>
                                    <div className="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500">‚ñº</div>
                                </div>
                            </div>
                            <div>
                                <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 font-display">Element</label>
                                <div className="relative">
                                    <select value={card.element} onChange={(e) => setCard(prev => ({ ...prev, element: e.target.value }))} 
                                            className="w-full bg-black/40 border border-white/10 rounded-lg px-3 py-3 text-white text-sm appearance-none focus:border-indigo-500 outline-none transition-all">
                                        {Object.values(ElementType).map(e => <option key={e} value={e}>{e}</option>)}
                                    </select>
                                    <div className="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500">‚ñº</div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 font-display">Lore Description</label>
                            <textarea value={card.description} onChange={(e) => setCard(prev => ({ ...prev, description: e.target.value }))} 
                                    className="w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-white text-sm h-24 resize-none focus:border-indigo-500 outline-none transition-all custom-scrollbar" />
                        </div>
                        </div>
                    </div>
                  </div>

                  {/* Stats Section */}
                  <div className="bg-slate-900/50 backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-xl relative overflow-hidden">
                     <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 to-purple-500 opacity-50"></div>
                     <h2 className="text-sm font-display font-bold text-white mb-6 flex items-center gap-2 uppercase tracking-widest">
                            <Activity size={16} className="text-purple-500" />
                            Attributes
                     </h2>
                     <div className="space-y-2">
                        <StatSlider label="PWR" value={card.stats.power} onChange={(v) => handleStatChange('power', v)} icon={Zap} color="text-red-400" />
                        <StatSlider label="DEF" value={card.stats.defense} onChange={(v) => handleStatChange('defense', v)} icon={Shield} color="text-blue-400" />
                        <StatSlider label="STA" value={card.stats.stamina} onChange={(v) => handleStatChange('stamina', v)} icon={Activity} color="text-green-400" />
                        <StatSlider label="AGI" value={card.stats.agility} onChange={(v) => handleStatChange('agility', v)} icon={Wind} color="text-yellow-400" />
                        <StatSlider label="INT" value={card.stats.intelligence} onChange={(v) => handleStatChange('intelligence', v)} icon={Brain} color="text-purple-400" />
                     </div>
                  </div>

                  {/* Image Upload */}
                  <div className="bg-slate-900/50 border border-dashed border-slate-700 hover:border-indigo-500 rounded-xl p-6 transition-colors group cursor-pointer" onClick={() => fileInputRef.current?.click()}>
                       <input type="file" ref={fileInputRef} onChange={handleImageUpload} accept="image/*" className="hidden" />
                       <div className="flex flex-col items-center justify-center text-center">
                          <div className="w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mb-3 group-hover:bg-indigo-500 group-hover:text-white transition-colors">
                             <ImageIcon size={20} />
                          </div>
                          <span className="font-display font-bold text-sm text-white">Upload Entity Avatar</span>
                          <span className="text-xs text-slate-500 mt-1">Supports PNG, JPG</span>
                       </div>
                   </div>

                </div>

                {/* PREVIEW PANEL (RIGHT) */}
                <div className="lg:col-span-7 animate-fade-up" style={{ animationDelay: '0.2s' }}>
                  <div className="sticky top-28">
                    <div className="mb-4 flex justify-center items-center gap-2">
                         <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                         <span className="text-[10px] font-mono uppercase tracking-widest text-green-500">Live Preview Active</span>
                    </div>
                    
                    <CardPreview data={card} ref={cardRef} />
                    
                    <div className="mt-8 flex justify-center">
                      <button onClick={handleDownload} disabled={isDownloading} 
                              className={`
                                relative overflow-hidden flex items-center gap-3 px-10 py-4 rounded-full 
                                font-display font-bold tracking-wider uppercase text-sm transition-all duration-300 shadow-[0_0_20px_rgba(99,102,241,0.3)]
                                ${isDownloading ? 'bg-slate-800 text-slate-500 cursor-wait' : 'bg-white text-black hover:scale-105 hover:shadow-[0_0_40px_rgba(99,102,241,0.6)]'}
                              `}>
                          {isDownloading ? <RefreshCw size={18} className="animate-spin" /> : <Download size={18} />}
                          {isDownloading ? 'Generating...' : 'Export Unit'}
                      </button>
                    </div>
                  </div>
                </div>

              </div>
            </main>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
  </script>
